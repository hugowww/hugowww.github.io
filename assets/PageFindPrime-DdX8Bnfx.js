var M=Object.defineProperty;var T=(n,e,s)=>e in n?M(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s;var o=(n,e,s)=>T(n,typeof e!="symbol"?e+"":e,s);import{e as P,f as p,o as m,c as f,a as i,n as _,F as g,g as N,t as b,k as y}from"./index-C4bxKiOZ.js";class S{constructor(){o(this,"primes",[])}getPrimes(){return this.primes}findPrimes(e,s,t){for(let r=e;r<s;r++)this.isPrime(r)&&(this.primes.push(r),t(r))}isPrime(e){if(e<=1)return!1;if(e<=3)return!0;if(e%2===0||e%3===0)return!1;for(let s=5;s*s<=e;s+=6)if(e%s===0||e%(s+2)===0)return!1;return!0}}class F{constructor(e,s,t){o(this,"finder");o(this,"startNumber");o(this,"endNumber");o(this,"updateCallback");this.startNumber=e,this.endNumber=s,this.updateCallback=t,this.finder=new S}start(){this.finder.findPrimes(this.startNumber,this.endNumber,e=>{this.updateCallback(e)})}}class W{constructor(e,s,t,r,c){o(this,"workers",[]);o(this,"completedWorkers",0);o(this,"updateCallback");o(this,"completeCallback");this.startNumber=e,this.endNumber=s,this.count=t,this.updateCallback=r,this.completeCallback=c}start(){var e=this.endNumber-this.startNumber;const s=Math.ceil(e/this.count);for(let t=0;t<this.count;t++){const r=this.startNumber+t*s,c=Math.min(r+s,this.endNumber),u=new Worker(new URL("/assets/prime.worker--odWEG3K.js",import.meta.url),{type:"module"});u.onmessage=h=>this.handleWorkerMessage(h,t),u.postMessage({startNumber:r,endNumber:c}),this.workers.push(u)}}handleWorkerMessage(e,s){const{type:t,data:r}=e.data;t==="progress"?this.updateCallback(r):t==="complete"&&(this.completedWorkers++,this.workers[s].terminate(),this.completedWorkers===this.workers.length&&(this.workers=[],this.completeCallback()))}}const B={class:"find-prime p-2"},x={class:"card d-inline-block"},E={class:"card-body"},L={class:"card d-inline-block ms-2"},R={class:"card-body"},$=["onClick"],j={class:"card mt-2"},z={class:"card-body"},A=5e4,k=1e11,D=P({__name:"FindPrime",setup(n){const e=p(!1),s=p([]),t=p(0),r=p(0),c=k+A;function u(){return r.value=0,e.value=!0,performance.now()}function h(l){const a=performance.now();t.value=a-l,e.value=!1}function v(l){s.value.push(l),s.value.length>10&&s.value.shift(),r.value++}const C=()=>{const l=new F(k,c,v);var a=u();l.start(),h(a)},w=l=>{const a=u();new W(k,c,l,v,()=>{h(a)}).start()};return(l,a)=>(m(),f("div",B,[a[3]||(a[3]=i("h2",null,"Find Prime Numbers",-1)),i("div",x,[a[0]||(a[0]=i("div",{class:"card-header"},"Single Thread Mode",-1)),i("div",E,[i("div",{class:_(["btn","btn-primary",e.value?"disabled":""]),onClick:C}," Start Finding Primes ",2)])]),i("div",L,[a[1]||(a[1]=i("div",{class:"card-header"},"Multi Thread Mode",-1)),i("div",R,[(m(),f(g,null,N([1,2,4,8,16,32],d=>i("div",{key:d,class:_(["btn","btn-primary","me-2",e.value?"disabled":""]),onClick:G=>w(d)}," Start ("+b(d)+" threads) ",11,$)),64))])]),i("div",j,[a[2]||(a[2]=i("div",{class:"card-header"},"Results",-1)),i("div",z,[i("p",null,"Time Cost: "+b(t.value)+"ms",1),i("p",null,"Last 10 Primes of "+b(r.value)+" primes",1),(m(!0),f(g,null,N(s.value,d=>(m(),f("div",{class:"prime",key:d},b(d),1))),128))])])]))}}),V=P({__name:"PageFindPrime",setup(n){return(e,s)=>(m(),y(D))}});export{V as default};
